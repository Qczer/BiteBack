<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.14.0/maps/maps.css" />

    <style>
        html,
        body,
        #map {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #map {
            background: #eee;
            pointer-events: auto;
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <script src="https://api.tomtom.com/maps-sdk-for-web/cdn/6.x/6.14.0/maps/maps-web.min.js"></script>

    <script>
        let map;
        let markers = []
        window.onload = function () {
            map = tt.map({
                key: "2Cq6a2zfnbxlpLO0gCnBD73zEiSEYekx",
                container: "map",
                center: [21.0122, 52.2297],
                zoom: 1
            });
            window.ReactNativeWebView.postMessage("co tam2")
            map.addControl(new tt.NavigationControl());

            map.on("dragend", () => {
                const c = map.getCenter(); // {lng: ..., lat: ...}

                window.ReactNativeWebView.postMessage(
                    JSON.stringify({
                        type: "map-center",
                        lng: c.lng,
                        lat: c.lat
                    })
                );
            });
        };

        window.addMarker = function (cords, name, description) {
            const popup = new tt.Popup({
                offset: 35
            }).setHTML(`<h3>${name}</h3><p>${description}</p>`)

            const marker = new tt.Marker()
                .setLngLat(cords)
                .setPopup(popup)      // <-- attach popup
                .addTo(map);

            markers.push(marker);
        }
        window.clearMarkers = function () {
            markers.forEach(m => m.remove())
            markers = []
        }
    </script>
</body>

</html>